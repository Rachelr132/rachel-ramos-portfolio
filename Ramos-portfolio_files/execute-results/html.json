{
  "hash": "253d89cd855d54340f8d1954eae42719",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"ramos-portfolio\"\nauthor: \"Rachel Ramos\"\nformat: html\n---\n\n\n\n## Part 1\n{r loading in data}\ncharacters<-read_csv(\"data/simpsons_characters.csv\")\nepisodes<-read_csv(\"data/simpsons_episodes.csv\")\nlocations<-read_csv(\"data/simpsons_locations.csv\")\nline<-read_csv(\"data/simpsons_script_lines.csv\")\n\n\n\n\n\"How does the number of lines spoken by the top 5 characters change across seasons?\"\n\n\n\n\n# Load required libraries\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n:::\n\n\n\n# Load the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncharacters<-read_csv(\"archive/simpsons_characters.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 6722 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): name, normalized_name, gender\ndbl (1): id\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nepisodes<-read_csv(\"archive/simpsons_episodes.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 600 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (4): image_url, production_code, title, video_url\ndbl  (9): id, imdb_rating, imdb_votes, number_in_season, number_in_series, o...\ndate (1): original_air_date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nlocations<-read_csv(\"archive/simpsons_locations.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 4459 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): name, normalized_name\ndbl (1): id\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nlines<-read_csv(\"archive/simpsons_script_lines.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat <- vroom(...)\n  problems(dat)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 158271 Columns: 13\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): raw_text, raw_character_text, raw_location_text, spoken_words, norm...\ndbl (7): id, episode_id, number, timestamp_in_ms, character_id, location_id,...\nlgl (1): speaking_line\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n\n# Step 1: Get top 5 characters by number of lines\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_characters <- lines %>%\n  count(raw_character_text, sort = TRUE) %>%\n  slice_head(n = 5) %>%\n  pull(raw_character_text)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmerged <- lines %>%\n  filter(raw_character_text %in% top_characters) %>%\n  left_join(episodes %>% select(id, season), by = c(\"episode_id\" = \"id\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nseasonal_lines <- merged %>%\n  group_by(season, raw_character_text) %>%\n  summarise(line_count = n(), .groups = \"drop\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(seasonal_lines, aes(x = season, y = line_count, color = raw_character_text)) +\n  geom_line(size = 1) +\n  labs(\n    title = \"Line Count by Top 5 Characters Across Seasons\",\n    x = \"Season\",\n    y = \"Number of Lines\",\n    color = \"Character\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Ramos-portfolio_files/figure-html/plot-1.png){width=672}\n:::\n:::\n\n\n\n\n## Question 1\n#How does the number of lines spoken by the top 5 characters change across seasons?\nHomer Simpson consistently has the most lines across all seasons, peaking around season 10. Bart, Marge, and Lisa have fewer lines with moderate fluctuations over time. One of the top 5 entries is labeled \"NA,\" likely due to missing or unlinked character data/ extras. The dialogue remains centered around Homer, with other main characters contributing steadily.\n\n\n\n## Question 2 \n\"Which locations are used most frequently in the show, and how has their usage changed across seasons?\"\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlines_clean <- lines %>%\n  filter(!is.na(location_id))  # remove lines without a known location\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlines_with_info <- lines_clean %>%\n  left_join(locations %>% select(id, location_name = name), \n            by = c(\"location_id\" = \"id\")) %>%\n  left_join(episodes %>% select(id, season), \n            by = c(\"episode_id\" = \"id\")) %>%\n  filter(!is.na(location_name), !is.na(season))  # Clean incomplete joins\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlines_with_info <- lines_with_info %>%\n  mutate(\n    season = as.integer(season),\n    location_name = str_trim(location_name)\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_locations <- lines_with_info %>%\n  count(location_name, sort = TRUE) %>%\n  slice_head(n = 5) %>%\n  pull(location_name)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlocation_trends <- lines_with_info %>%\n  filter(location_name %in% top_locations) %>%\n  group_by(season, location_name) %>%\n  summarise(line_count = n(), .groups = \"drop\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(location_trends, aes(x = season, y = line_count, color = location_name)) +\n  geom_line(size = 1.1) +\n  geom_point(size = 2) +\n  labs(\n    title = \"Top 5 Locations by Number of Spoken Lines Across Seasons\",\n    x = \"Season\",\n    y = \"Number of Lines Spoken\",\n    color = \"Location\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Ramos-portfolio_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\"Which locations are used most frequently in the show, and how has their usage changed across seasons?\"\n\nThe Simpson Home is the most used location, peaking around season 3 and staying central throughout the series. Other locations—like the school, Moe’s Tavern, and the power plant appear far less often, with occasional spikes that reflect shifts in episode focus. Overall, the show remains grounded in the family’s home, with other settings used more episodically.\n\n\n\n\n\n",
    "supporting": [
      "Ramos-portfolio_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}